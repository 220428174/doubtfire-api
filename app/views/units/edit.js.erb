// Build the row id string from the unit id
var unitRowId = "project-" + "<%= @unit.id %>" +  "-row";
var partial = "<%=j render :partial => 'units/table_row_edit', :locals => { :unit => @unit } %>"

// Render the table_row_edit partial. If we just created a new team via the 'Create' button, it won't have a row in the table yet. 
if(document.getElementById(unitRowId) != null)
	$("#" + unitRowId).replaceWith(partial);		// Row already exists - replace it with the form
else
	$("#units-table").append(partial);			// No row exists yet - append one

// Make sure the table is visible and the "no units" message is hidden.
if($("#units-table").find("tbody").children().length > 0)
{
	$("#no-units-message").hide();
	$("#units-table").show();
}