<%- model_class = User.new.class -%>
<table class="table table-striped">
	<thead>
		<tr>
			<th><%= model_class.human_attribute_name(:username) %></th>
			<th><%= model_class.human_attribute_name(:first_name) %></th>
			<th><%= model_class.human_attribute_name(:last_name) %></th>
			<th><%= model_class.human_attribute_name(:progress) %></th>
			<th><%= model_class.human_attribute_name(:tasks_completed) %></th>
			<th>Rate (per week)</th>
			<th>Team</th>
		</tr>
	</thead>
	<tbody>
		<% @projects.each do |project| %>
			<tr>
				<td><%= link_to project.team_membership.user.username, project_path(project) %></td>
				<td><%= project.team_membership.user.first_name %></td>
				<td><%= project.team_membership.user.last_name %></td>
				<td><%= project.in_progress? ? progress_badge(project.progress) : status_badge(project.status) %></td>
				<td>
					<%= link_to "#{project.completed_tasks.size} / #{@project_template.task_templates.size}", project_path(project) %>
				</td>
				<td><%= "%3.2f" % project.rate_of_completion %></td>
				<td>
					<%= link_to [
						"#{project.team_membership.team.meeting_day}",
						"#{project.team_membership.team.meeting_time}",
						"(#{project.team_membership.team.user.name})"
					].join(" "), convenor_project_team_path(project.project_template, project.team_membership.team) %>
				</td>
			</tr>
		<% end %>
	</tbody>
</table>